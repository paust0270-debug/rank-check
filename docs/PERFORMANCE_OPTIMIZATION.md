# 성능 최적화 보고서

**작성일**: 2026-01-08  
**목적**: 순위 체크 소요 시간 단축

---

## 📊 최적화 전/후 비교

### 1페이지 처리 시간

| 항목 | 최적화 전 | 최적화 후 | 개선율 |
|------|----------|----------|--------|
| 스크롤 횟수 | 18번 | 12번 | **33% 감소** |
| 스크롤 간격 | 250ms | 150ms | **40% 감소** |
| 마지막 대기 | 600ms | 300ms | **50% 감소** |
| **총 소요 시간** | **~5.1초** | **~2.1초** | **약 59% 단축** |

### 페이지 간 대기 시간

| 항목 | 최적화 전 | 최적화 후 | 개선율 |
|------|----------|----------|--------|
| SAFE_DELAY_MS | 5000ms | 2500ms | **50% 감소** |
| 검색 결과 대기 | 3000ms | 2000ms | **33% 감소** |
| 쇼핑탭 진입 대기 | 5800ms | 3500ms | **40% 감소** |

### 배치 처리

| 항목 | 최적화 전 | 최적화 후 | 개선율 |
|------|----------|----------|--------|
| 배치 쿨다운 | 15초 | 10초 | **33% 감소** |

---

## 🔧 변경된 파일 목록

### 1. 핵심 수집기

#### `rank-check/collectors/DomProductCollector.ts`
- `SCROLL_STEPS`: 18 → 12 (33% 감소)
- `SCROLL_GAP_MS`: 250 → 150 (40% 감소)
- 마지막 대기: 600ms → 300ms (50% 감소)

#### `rank-check/collectors/HybridProductCollector.ts`
- `SAFE_DELAY_MS`: 5000 → 2500 (50% 감소, DOM 폴백 대기)

### 2. 코어 시스템

#### `rank-check/core/RankChecker.ts`
- `SAFE_DELAY_MS`: 5000 → 2500 (50% 감소, 페이지 간 대기)

#### `rank-check/accurate-rank-checker.ts`
- `SAFE_DELAY_MS`: 5000 → 2500 (50% 감소)
- `SCROLL_STEPS`: 18 → 12 (33% 감소)
- `SCROLL_GAP_MS`: 250 → 150 (40% 감소)
- 마지막 대기: 600ms → 300ms (50% 감소)
- 검색 결과 대기: 3000ms → 2000ms (33% 감소)
- React 렌더링 대기: 1500ms → 1000ms (33% 감소)
- DOM 렌더링 대기: 3000ms → 2000ms (33% 감소)

### 3. 병렬 처리

#### `rank-check/parallel/parallel-rank-checker.ts`
- `SAFE_DELAY_MS`: 5000 → 2500 (50% 감소)
- `SCROLL_STEPS`: 18 → 12 (33% 감소)
- 마지막 대기: 600ms → 300ms (50% 감소)
- 검색 결과 대기: 3000ms → 2000ms (33% 감소)

### 4. 네비게이션

#### `rank-check/navigation/ShoppingTabNavigator.ts`
- `SAFE_DELAY_MS`: 5000 → 3000 (40% 감소)
- 쇼핑탭 진입 대기: 5800ms → 3500ms (40% 감소)
- 검색 결과 대기: 3000ms → 2000ms (33% 감소)

### 5. 배치 처리

#### `rank-check/batch/check-batch-keywords.ts`
- `BATCH_COOLDOWN_MS`: 15000 → 10000 (33% 감소)

### 6. 유틸리티

#### `rank-check/utils/humanBehavior.ts`
- 스크롤 딜레이: 150~400ms → 100~250ms (평균 33% 감소)
- 멈춤 확률: 10% → 5% (50% 감소)
- 멈춤 시간: 500~1500ms → 300~800ms (평균 50% 감소)

#### `rank-check/single/check-mid-rank-simple.ts`
- 페이지 간 대기: 2500ms → 1500ms (40% 감소)

---

## ⚡ 예상 성능 개선

### 단일 키워드 체크 (15페이지)

| 시나리오 | 최적화 전 | 최적화 후 | 개선 |
|----------|----------|----------|------|
| 1페이지에서 발견 | ~5.1초 | ~2.1초 | **3초 단축** |
| 5페이지에서 발견 | ~25초 | ~12초 | **13초 단축** |
| 15페이지 전체 검색 | ~75초 | ~35초 | **40초 단축** |

### 배치 처리 (100개 키워드)

| 항목 | 최적화 전 | 최적화 후 | 개선 |
|------|----------|----------|------|
| 배치 간 쿨다운 | 15초 × 50배치 = 750초 | 10초 × 50배치 = 500초 | **250초 단축** |
| 전체 처리 시간 | ~2시간 | ~1.3시간 | **약 35% 단축** |

---

## ⚠️ 주의사항

### 봇 탐지 위험

최적화로 인해 봇 탐지 위험이 약간 증가할 수 있습니다:

1. **스크롤 속도**: 더 빠른 스크롤이 비정상적으로 보일 수 있음
2. **대기 시간**: 짧은 대기 시간이 자동화로 보일 수 있음

### 권장 사항

- **모니터링**: 차단율이 증가하는지 확인
- **조정 가능**: 환경 변수로 대기 시간 조정 가능
  - `BATCH_COOLDOWN_MS`: 배치 쿨다운 조정
  - 필요시 코드에서 직접 수정

### 안전장치

- `humanScroll` 함수는 여전히 랜덤 딜레이 사용 (자연스러움 유지)
- API 방식은 2페이지부터 사용 (스크롤 최소화)
- 차단 감지 시스템 유지

---

## 📈 추가 최적화 가능 영역

### 향후 개선 사항

1. **1페이지도 API 방식**: 스크롤 완전 제거 (추가 2초 단축 가능)
2. **병렬 처리 증가**: 워커 수 증가 (전체 처리 시간 단축)
3. **캐싱**: 동일 키워드 재검색 시 캐시 활용

---

## ✅ 결론

### 주요 개선 사항

- ✅ **1페이지 스크롤 시간**: 5.1초 → 2.1초 (**59% 단축**)
- ✅ **페이지 간 대기**: 5초 → 2.5초 (**50% 단축**)
- ✅ **배치 쿨다운**: 15초 → 10초 (**33% 단축**)
- ✅ **전체 처리 시간**: 약 **35-40% 단축** 예상

### 예상 효과

- **단일 키워드**: 평균 **30-40% 빠름**
- **배치 처리**: 전체 시간 **35% 단축**
- **일일 처리량**: **50% 이상 증가** 가능

---

**작성자**: AI Assistant  
**최종 업데이트**: 2026-01-08


