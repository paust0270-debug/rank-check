# ë„¤ì´ë²„ ìˆœìœ„ ì²´í¬ APK - ì¢…í•© PRD (Product Requirements Document)

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ì‘ì„±ì¼**: 2025-11-16  
**ì‘ì„±ì**: Manus AI  
**í”„ë¡œì íŠ¸ëª…**: ë„¤ì´ë²„ ì‡¼í•‘ ìˆœìœ„ ì²´í¬ ìë™í™” ì‹œìŠ¤í…œ (Naver Shopping Rank Checker)

---

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#2-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ê¸°ìˆ  ì‚¬ì–‘](#3-ê¸°ìˆ -ì‚¬ì–‘)
4. [í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­](#4-í•µì‹¬-ê¸°ëŠ¥-ìš”êµ¬ì‚¬í•­)
5. [ë°ì´í„° ëª¨ë¸](#5-ë°ì´í„°-ëª¨ë¸)
6. [HTTP í†µì‹  í”„ë¡œí† ì½œ](#6-http-í†µì‹ -í”„ë¡œí† ì½œ)
7. [ìˆœìœ„ ì²´í¬ ì•Œê³ ë¦¬ì¦˜](#7-ìˆœìœ„-ì²´í¬-ì•Œê³ ë¦¬ì¦˜)
8. [ë³´ì•ˆ ë° ì°¨ë‹¨ íšŒí”¼](#8-ë³´ì•ˆ-ë°-ì°¨ë‹¨-íšŒí”¼)
9. [ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­](#9-ì„±ëŠ¥-ìš”êµ¬ì‚¬í•­)
10. [í…ŒìŠ¤íŠ¸ ê³„íš](#10-í…ŒìŠ¤íŠ¸-ê³„íš)
11. [ë°°í¬ ë° ìš´ì˜](#11-ë°°í¬-ë°-ìš´ì˜)
12. [ë¶€ë¡](#12-ë¶€ë¡)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©ì  ë° ë°°ê²½

ë³¸ í”„ë¡œì íŠ¸ëŠ” **ì œë¡œìˆœìœ„ Updater APK (zru12)** ë¦¬ë²„ìŠ¤ ì—”ì§€ë‹ˆì–´ë§ ë¶„ì„ì„ ê¸°ë°˜ìœ¼ë¡œ, ë„¤ì´ë²„ ì‡¼í•‘ì—ì„œ íŠ¹ì • ìƒí’ˆì˜ ê²€ìƒ‰ ìˆœìœ„ë¥¼ ìë™ìœ¼ë¡œ ì²´í¬í•˜ê³  ë³´ê³ í•˜ëŠ” ì•ˆë“œë¡œì´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê¸° ìœ„í•œ ì¢…í•© ìš”êµ¬ì‚¬í•­ ë¬¸ì„œì…ë‹ˆë‹¤.

ê¸°ì¡´ ì‹œìŠ¤í…œì€ ì‹¤ì œ ì•ˆë“œë¡œì´ë“œ ë””ë°”ì´ìŠ¤ì—ì„œ ì‚¼ì„± ì¸í„°ë„· ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ë„¤ì´ë²„ ì‡¼í•‘ì„ ìë™í™”í•˜ì—¬ ìˆœìœ„ë¥¼ ì²´í¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ë³¸ ë¬¸ì„œëŠ” ì´ëŸ¬í•œ ê¸°ì¡´ ì‹œìŠ¤í…œì˜ ë™ì‘ ì›ë¦¬ë¥¼ ì™„ì „íˆ ë¶„ì„í•˜ê³ , ê°œì„ ëœ í˜•íƒœë¡œ ì¬êµ¬í˜„í•˜ê¸° ìœ„í•œ ê¸°ìˆ ì  ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•©ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê°€ì¹˜ ì œì•ˆ

**ê¸°ì¡´ ì‹œìŠ¤í…œ ëŒ€ë¹„ ê°œì„  ì‚¬í•­**:

- **í™•ì¥ì„±**: í´ë¼ìš°ë“œ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¡œ ë¬´í•œ í™•ì¥ ê°€ëŠ¥
- **ìë™í™”**: 24/7 ë¬´ì¸ ìš´ì˜ ì§€ì›
- **ìœ ì—°ì„±**: ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜ ì œì–´ ë° ìº í˜ì¸ ê´€ë¦¬
- **ì•ˆì •ì„±**: ìë™ ì¬ì‹œë„ ë° ì—ëŸ¬ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜
- **ë³´ì•ˆì„±**: í”„ë¡ì‹œ ë° User-Agent ë¡œí…Œì´ì…˜ì„ í†µí•œ ì°¨ë‹¨ íšŒí”¼
- **ë¶„ì„**: ì‹¤ì‹œê°„ í†µê³„ ë° ìˆœìœ„ ë³€ë™ ì¶”ì 

### 1.3 íƒ€ê²Ÿ ì‚¬ìš©ì

- **ë„¤ì´ë²„ ì‡¼í•‘ ì…€ëŸ¬**: ìì‚¬ ìƒí’ˆì˜ ê²€ìƒ‰ ìˆœìœ„ ëª¨ë‹ˆí„°ë§
- **ë§ˆì¼€íŒ… ì—ì´ì „ì‹œ**: í´ë¼ì´ì–¸íŠ¸ ìƒí’ˆì˜ ìˆœìœ„ ì¶”ì  ë° ë³´ê³ 
- **SEO ì „ë¬¸ê°€**: í‚¤ì›Œë“œ ìˆœìœ„ ë¶„ì„ ë° ìµœì í™”

### 1.4 ì£¼ìš” ê¸°ëŠ¥

1. **ì‘ì—… ìš”ì²­ ë° ê´€ë¦¬**: ì„œë²„ë¡œë¶€í„° ìˆœìœ„ ì²´í¬ ì‘ì—… ìˆ˜ì‹ 
2. **ìë™ ìˆœìœ„ ì²´í¬**: ë„¤ì´ë²„ ì‡¼í•‘ ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ìƒí’ˆ ìˆœìœ„ ìë™ íƒìƒ‰
3. **ìˆœìœ„ ë³´ê³ **: ì²´í¬ëœ ìˆœìœ„ë¥¼ ì„œë²„ë¡œ ì „ì†¡
4. **10ê°œ ë³€ìˆ˜ ì‹œìŠ¤í…œ**: ë™ì  HTTP í—¤ë” ìƒì„± ë° í–‰ë™ íŒ¨í„´ ì œì–´
5. **ì¿ í‚¤ ê´€ë¦¬**: ë„¤ì´ë²„ ì¿ í‚¤ ìë™ ì ìš© ë° ë¡œí…Œì´ì…˜
6. **ì—ëŸ¬ ì²˜ë¦¬**: ìë™ ì¬ì‹œë„ ë° ìƒì„¸ ë¡œê·¸ ê¸°ë¡

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ ì•„í‚¤í…ì²˜ ê°œìš”

ë³¸ ì‹œìŠ¤í…œì€ **í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ì•„í‚¤í…ì²˜**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, ì•ˆë“œë¡œì´ë“œ APKëŠ” í´ë¼ì´ì–¸íŠ¸ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Zero API Server                        â”‚
â”‚  (http://api-daae8ace959079d5.elb.ap-northeast-2.amazonaws) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–² â”‚
                            â”‚ â”‚ HTTP/REST
                            â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Android APK (Client)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          NetworkEngine (Retrofit + OkHttp)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         ActivityMCloud (Main Controller)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      WebViewManager (Samsung Internet Bridge)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   NaverShopRankAction (Rank Check Logic)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–² â”‚
                            â”‚ â”‚ JavaScript Injection
                            â”‚ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Samsung Internet (WebView)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Naver Shopping Search Results                 â”‚  â”‚
â”‚  â”‚  (https://msearch.shopping.naver.com/search/all)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 í•µì‹¬ ì»´í¬ë„ŒíŠ¸

#### 2.2.1 NetworkEngine

**ì—­í• **: Zero API ì„œë²„ì™€ì˜ HTTP í†µì‹  ë‹´ë‹¹

**ê¸°ìˆ  ìŠ¤íƒ**:
- Retrofit 2.x (HTTP í´ë¼ì´ì–¸íŠ¸)
- OkHttp 3.x (HTTP ì—”ì§„)
- Gson (JSON ì§ë ¬í™”/ì—­ì§ë ¬í™”)

**ì£¼ìš” ë©”ì„œë“œ**:

| ë©”ì„œë“œ | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|--------|-----------|------|
| `getKeywordsForRankCheck()` | `POST /v1/mobile/keywords/naver/rank_check` | ì‘ì—… ìš”ì²­ |
| `updateKeywordRank()` | `POST /v1/mobile/keyword/naver/{keywordId}/rank` | ìˆœìœ„ ë³´ê³  |
| `updateProductInfo()` | `POST /v1/mobile/keyword/naver/{keywordId}/product_info` | ìƒí’ˆ ì •ë³´ ì—…ë°ì´íŠ¸ |
| `finishKeyword()` | `POST /v1/mobile/keyword/{keywordId}/finish` | ì‘ì—… ì™„ë£Œ |

**Retrofit ì„¤ì •**:

```java
OkHttpClient okHttpClient = new OkHttpClient()
    .newBuilder()
    .connectTimeout(5L, TimeUnit.SECONDS)
    .readTimeout(20L, TimeUnit.SECONDS)
    .writeTimeout(20L, TimeUnit.SECONDS)
    .build();

Retrofit retrofit = new Retrofit.Builder()
    .baseUrl("http://api-daae8ace959079d5.elb.ap-northeast-2.amazonaws.com/zero/api/")
    .client(okHttpClient)
    .addConverterFactory(GsonConverterFactory.create())
    .build();
```

#### 2.2.2 ActivityMCloud

**ì—­í• **: ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬, ì‘ì—… íë¦„ ê´€ë¦¬

**ì£¼ìš” ì±…ì„**:
1. Zero APIë¡œë¶€í„° ì‘ì—… ìˆ˜ì‹  (`getKeywordsForRankCheck`)
2. KeywordData ì²˜ë¦¬ (`processKeywordData`)
3. WebView ì´ˆê¸°í™” ë° ì œì–´
4. ìˆœìœ„ ì²´í¬ ê²°ê³¼ ì²˜ë¦¬
5. ì‘ì—… ì™„ë£Œ ë³´ê³ 

**í”„ë¡œì„¸ìŠ¤ íë¦„**:

```
1. ì•± ì‹œì‘
   â†“
2. getKeywordsForRankCheck() í˜¸ì¶œ
   â†“
3. KeywordData ìˆ˜ì‹ 
   â†“
4. processKeywordData() ì‹¤í–‰
   â†“
5. WebView ì´ˆê¸°í™” (ì¿ í‚¤, User-Agent ì„¤ì •)
   â†“
6. ë„¤ì´ë²„ ì‡¼í•‘ ê²€ìƒ‰ í˜ì´ì§€ ë¡œë“œ
   â†“
7. NaverShopRankAction.start() ì‹¤í–‰
   â†“
8. ìˆœìœ„ ì²´í¬ ì™„ë£Œ
   â†“
9. updateKeywordRank() í˜¸ì¶œ (ìˆœìœ„ ë³´ê³ )
   â†“
10. finishKeyword() í˜¸ì¶œ (ì‘ì—… ì™„ë£Œ)
    â†“
11. ë‹¤ìŒ ì‘ì—… ìš”ì²­ (2ë²ˆìœ¼ë¡œ ëŒì•„ê°)
```

#### 2.2.3 WebViewManager

**ì—­í• **: ì‚¼ì„± ì¸í„°ë„· WebView ê´€ë¦¬ ë° JavaScript ì¸ì ì…˜

**ì£¼ìš” ê¸°ëŠ¥**:
1. WebView ì´ˆê¸°í™” ë° ì„¤ì •
2. User-Agent ì„¤ì •
3. ì¿ í‚¤ ì£¼ì…
4. JavaScript ì¸í„°í˜ì´ìŠ¤ ë“±ë¡
5. í˜ì´ì§€ ë¡œë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬

**WebView ì„¤ì •**:

```java
WebSettings settings = webView.getSettings();
settings.setJavaScriptEnabled(true);
settings.setDomStorageEnabled(true);
settings.setUserAgentString(userAgent);
settings.setCacheMode(WebSettings.LOAD_NO_CACHE);
```

**ì¿ í‚¤ ì„¤ì •**:

```java
CookieManager cookieManager = CookieManager.getInstance();
cookieManager.setAcceptCookie(true);
cookieManager.setCookie(".naver.com", "NNB=" + nnb);
cookieManager.setCookie(".naver.com", "sus_val=" + susVal);
if (useNid == 1) {
    cookieManager.setCookie(".naver.com", "NID_AUT=" + nidAut);
    cookieManager.setCookie(".naver.com", "NID_SES=" + nidSes);
}
```

#### 2.2.4 NaverShopRankAction

**ì—­í• **: ë„¤ì´ë²„ ì‡¼í•‘ ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ìƒí’ˆ ìˆœìœ„ ì²´í¬

**ì£¼ìš” ê¸°ëŠ¥**:
1. ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ íŒŒì‹±
2. ìƒí’ˆ ID (MID1) ë§¤ì¹­
3. í˜ì´ì§€ ìŠ¤í¬ë¡¤ ë° ë‹¤ìŒ í˜ì´ì§€ ì´ë™
4. ìˆœìœ„ ê³„ì‚° ë° ë°˜í™˜

**ìˆœìœ„ ì²´í¬ ë¡œì§**:

```
1. ê²€ìƒ‰ URL ìƒì„±
   https://msearch.shopping.naver.com/search/all?query={keyword}&pagingIndex={page}
   
2. í˜ì´ì§€ ë¡œë“œ ëŒ€ê¸°
   
3. JavaScript ì¸ì ì…˜ìœ¼ë¡œ ìƒí’ˆ ëª©ë¡ ì¶”ì¶œ
   document.querySelectorAll('[data-product-id]')
   
4. ê° ìƒí’ˆì˜ MID1ê³¼ íƒ€ê²Ÿ MID1 ë¹„êµ
   
5. ë§¤ì¹­ë˜ë©´ ìˆœìœ„ ê³„ì‚° (í˜ì´ì§€ ë²ˆí˜¸ Ã— 40 + ìƒí’ˆ ì¸ë±ìŠ¤)
   
6. ë§¤ì¹­ ì•ˆë˜ë©´ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™ (ìµœëŒ€ 10í˜ì´ì§€)
   
7. ìˆœìœ„ ë°˜í™˜ (ì°¾ìœ¼ë©´ ìˆœìœ„, ëª» ì°¾ìœ¼ë©´ -1)
```

### 2.3 í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IDLE      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ getKeywordsForRankCheck()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FETCHING   â”‚
â”‚   TASK      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ KeywordData ìˆ˜ì‹ 
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROCESSING  â”‚
â”‚   DATA      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ processKeywordData()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INITIALIZINGâ”‚
â”‚   WEBVIEW   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ WebView ì„¤ì • ì™„ë£Œ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LOADING    â”‚
â”‚    PAGE     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CHECKING   â”‚
â”‚    RANK     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ìˆœìœ„ ì°¾ìŒ ë˜ëŠ” ìµœëŒ€ í˜ì´ì§€ ë„ë‹¬
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REPORTING  â”‚
â”‚    RANK     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ updateKeywordRank() ì™„ë£Œ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FINISHING   â”‚
â”‚    TASK     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ finishKeyword() ì™„ë£Œ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   IDLE      â”‚ (ë‹¤ìŒ ì‘ì—… ëŒ€ê¸°)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ê¸°ìˆ  ì‚¬ì–‘

### 3.1 ê°œë°œ í™˜ê²½

| í•­ëª© | ì‚¬ì–‘ |
|------|------|
| **ì–¸ì–´** | Java 8+ |
| **í”Œë«í¼** | Android 8.0 (API 26) ì´ìƒ |
| **ë¹Œë“œ ë„êµ¬** | Gradle 7.x |
| **IDE** | Android Studio Arctic Fox ì´ìƒ |
| **ìµœì†Œ SDK** | API 26 (Android 8.0) |
| **íƒ€ê²Ÿ SDK** | API 33 (Android 13) |

### 3.2 í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

| ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë²„ì „ | ìš©ë„ |
|-----------|------|------|
| Retrofit | 2.9.0 | HTTP í´ë¼ì´ì–¸íŠ¸ |
| OkHttp | 3.14.9 | HTTP ì—”ì§„ |
| Gson | 2.8.9 | JSON ì§ë ¬í™” |
| Samsung Internet | - | WebView ì—”ì§„ |

### 3.3 ì™¸ë¶€ ì˜ì¡´ì„±

**Zero API Server**:
- Base URL: `http://api-daae8ace959079d5.elb.ap-northeast-2.amazonaws.com/zero/api/`
- ì¸ì¦: `login_id` + `imei` (í† í° ì—†ìŒ)
- ì‘ë‹µ í˜•ì‹: JSON

**Naver Shopping API**:
- Search URL: `https://msearch.shopping.naver.com/search/all`
- GraphQL URL: `https://msearch.shopping.naver.com/api/graphql`

---

## 4. í•µì‹¬ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 4.1 í•„ìˆ˜ ê¸°ëŠ¥ (MVP)

#### 4.1.1 ì‘ì—… ìš”ì²­ ë° ìˆ˜ì‹ 

**ìš”êµ¬ì‚¬í•­**:
- Zero API ì„œë²„ë¡œë¶€í„° ìˆœìœ„ ì²´í¬ ì‘ì—…ì„ ìš”ì²­í•˜ê³  ìˆ˜ì‹ í•´ì•¼ í•©ë‹ˆë‹¤.
- ì‘ì—… ìš”ì²­ ì‹œ `login_id`ì™€ `imei`ë¥¼ ì „ì†¡í•´ì•¼ í•©ë‹ˆë‹¤.
- ì‘ë‹µìœ¼ë¡œ `KeywordData` ê°ì²´ë¥¼ ìˆ˜ì‹ í•˜ê³  íŒŒì‹±í•´ì•¼ í•©ë‹ˆë‹¤.

**API ëª…ì„¸**:

```
POST /v1/mobile/keywords/naver/rank_check
Content-Type: application/x-www-form-urlencoded

Body:
  login_id={login_id}
  imei={imei}

Response:
{
  "status": 0,
  "data": [
    {
      "keyword_id": 896912,
      "search": "ìì „ê±° ì¥ê°‘",
      "product_id": "48270522934",
      "traffic_id": 67890,
      "ua_change": 1,
      "cookie_home_mode": 1,
      "shop_home": 1,
      "use_nid": 0,
      "use_image": 1,
      "work_type": 3,
      "random_click_count": 2,
      "work_more": 1,
      "sec_fetch_site_mode": 1,
      "low_delay": 2,
      "ad_query": "ìì „ê±° ì¥ê°‘",
      "orig_query": "ìì „ê±° ì¥ê°‘",
      "sort": "rel",
      "view_type": "list",
      "product_set": "total"
    }
  ],
  "user_agent": "Mozilla/5.0 (Linux; Android 8.0.0; SM-G930K) ...",
  "device_ip": "123.456.789.012",
  "naver_cookie": {
    "nnb": "IJETDRGUTUMGS"
  },
  "naver_login_cookie": {
    "nnb": "IJETDRGUTUMGS",
    "nid_aut": "...",
    "nid_ses": "...",
    "nid_jkl": "..."
  }
}
```

**ê²€ì¦ ê¸°ì¤€**:
- ì‘ë‹µ `status`ê°€ 0ì´ë©´ ì„±ê³µ
- `data` ë°°ì—´ì— ìµœì†Œ 1ê°œ ì´ìƒì˜ ì‘ì—… í¬í•¨
- ëª¨ë“  í•„ìˆ˜ í•„ë“œ ì¡´ì¬ í™•ì¸

#### 4.1.2 10ê°œ ë³€ìˆ˜ ì‹œìŠ¤í…œ

**ìš”êµ¬ì‚¬í•­**:
- ì„œë²„ë¡œë¶€í„° ìˆ˜ì‹ í•œ 10ê°œ ë³€ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ HTTP í—¤ë” ë° í–‰ë™ íŒ¨í„´ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.
- ê° ë³€ìˆ˜ëŠ” íŠ¹ì • ë™ì‘ì„ ì œì–´í•˜ë©°, ì •í™•íˆ ë§¤í•‘ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

**10ê°œ ë³€ìˆ˜ ìƒì„¸ ëª…ì„¸**:

| ë³€ìˆ˜ëª… | íƒ€ì… | ì„¤ëª… | ê°€ëŠ¥í•œ ê°’ | ì˜í–¥ ë²”ìœ„ |
|--------|------|------|-----------|-----------|
| `ua_change` | int | User-Agent ë³€ê²½ ì—¬ë¶€ | 0 = ê¸°ë³¸ UA ì‚¬ìš©<br>1 = ì„œë²„ ì œê³µ UA ì‚¬ìš© | HTTP í—¤ë” |
| `cookie_home_mode` | int | ì¿ í‚¤ í™ˆ ëª¨ë“œ | 0 = ì¿ í‚¤ ë¯¸ì‚¬ìš©<br>1 = ì„œë²„ ì œê³µ ì¿ í‚¤ ì‚¬ìš© | HTTP í—¤ë” (Cookie) |
| `shop_home` | int | Referer ì„¤ì • | 0 = `https://m.naver.com/`<br>1 = `https://msearch.shopping.naver.com/`<br>3 = `https://msearch.shopping.naver.com/di/`<br>4 = `https://search.naver.com/search.naver` | HTTP í—¤ë” (Referer) |
| `use_nid` | int | ë„¤ì´ë²„ ë¡œê·¸ì¸ ì¿ í‚¤ ì‚¬ìš© | 0 = ë¯¸ë¡œê·¸ì¸ ìƒíƒœ<br>1 = ë¡œê·¸ì¸ ì¿ í‚¤ ì‚¬ìš© (NID_AUT, NID_SES) | HTTP í—¤ë” (Cookie) |
| `use_image` | int | ì´ë¯¸ì§€ ë¡œë”© | 0 = ì´ë¯¸ì§€ ë¹„í™œì„±í™”<br>1 = ì´ë¯¸ì§€ í™œì„±í™” | WebView ì„¤ì • |
| `work_type` | int | ì‘ì—… íƒ€ì… (ì…ë ¥ ë°©ì‹) | 1 = ì§ì ‘ ì…ë ¥<br>2 = ë³µì‚¬/ë¶™ì—¬ë„£ê¸°<br>3 = ìë™ ì™„ì„± | í–‰ë™ íŒ¨í„´ |
| `random_click_count` | int | ëœë¤ í´ë¦­ íšŸìˆ˜ | 0~5 | í–‰ë™ íŒ¨í„´ |
| `work_more` | int | ë”ë³´ê¸° í´ë¦­ | 0 = í´ë¦­ ì•ˆí•¨<br>1 = í´ë¦­í•¨ | í–‰ë™ íŒ¨í„´ |
| `sec_fetch_site_mode` | int | Sec-Fetch-Site í—¤ë” | 0 = `none`<br>1 = `same-site`<br>2 = `same-origin` | HTTP í—¤ë” |
| `low_delay` | int | ë”œë ˆì´ ì‹œê°„ (ì´ˆ) | 1~10 | í–‰ë™ íŒ¨í„´ |

**HTTP í—¤ë” ìƒì„± ë¡œì§**:

```java
public Map<String, String> generateHeaders(KeywordItem task) {
    Map<String, String> headers = new HashMap<>();
    
    // 1. User-Agent
    if (task.uaChange == 1) {
        headers.put("User-Agent", task.userAgent);
    } else {
        headers.put("User-Agent", DEFAULT_USER_AGENT);
    }
    
    // 2. Referer
    String[] referers = {
        "https://m.naver.com/",
        "https://msearch.shopping.naver.com/",
        null, // ì¸ë±ìŠ¤ 2ëŠ” ì‚¬ìš© ì•ˆí•¨
        "https://msearch.shopping.naver.com/di/",
        "https://search.naver.com/search.naver"
    };
    headers.put("Referer", referers[task.shopHome]);
    
    // 3. Sec-Fetch-Site
    String[] secFetchSites = {"none", "same-site", "same-origin"};
    headers.put("Sec-Fetch-Site", secFetchSites[task.secFetchSiteMode]);
    
    // 4. ê¸°íƒ€ ê³ ì • í—¤ë”
    headers.put("Sec-Fetch-Mode", "navigate");
    headers.put("Sec-Fetch-Dest", "document");
    headers.put("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    headers.put("Accept-Language", "ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7");
    
    return headers;
}
```

**ê²€ì¦ ê¸°ì¤€**:
- ê° ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥¸ HTTP í—¤ë”ë¡œ ë³€í™˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- Logcat ë˜ëŠ” Frida í›„í‚¹ìœ¼ë¡œ ì‹¤ì œ ì „ì†¡ í—¤ë” í™•ì¸ í•„ìš”

#### 4.1.3 ìˆœìœ„ ì²´í¬ ì•Œê³ ë¦¬ì¦˜

**ìš”êµ¬ì‚¬í•­**:
- ë„¤ì´ë²„ ì‡¼í•‘ ê²€ìƒ‰ ê²°ê³¼ì—ì„œ íƒ€ê²Ÿ ìƒí’ˆì˜ ìˆœìœ„ë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.
- ìµœëŒ€ 10í˜ì´ì§€ê¹Œì§€ ê²€ìƒ‰í•´ì•¼ í•©ë‹ˆë‹¤.
- ê° í˜ì´ì§€ëŠ” ìµœëŒ€ 40ê°œ ìƒí’ˆì„ í¬í•¨í•©ë‹ˆë‹¤.

**ì•Œê³ ë¦¬ì¦˜ íë¦„**:

```
Input: keyword (ê²€ìƒ‰ í‚¤ì›Œë“œ), productId (íƒ€ê²Ÿ ìƒí’ˆ ID)
Output: rank (ìˆœìœ„, ëª» ì°¾ìœ¼ë©´ -1)

1. currentPage = 1
2. WHILE currentPage <= 10:
     a. URL ìƒì„±: https://msearch.shopping.naver.com/search/all?query={keyword}&pagingIndex={currentPage}
     b. WebViewë¡œ í˜ì´ì§€ ë¡œë“œ
     c. í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ëŒ€ê¸°
     d. JavaScript ì¸ì ì…˜ìœ¼ë¡œ ìƒí’ˆ ëª©ë¡ ì¶”ì¶œ:
        products = document.querySelectorAll('[data-product-id]')
     e. FOR EACH product IN products:
          i. ìƒí’ˆ ID ì¶”ì¶œ: mid1 = product.getAttribute('data-product-id')
          ii. IF mid1 == productId:
                rank = (currentPage - 1) * 40 + productIndex + 1
                RETURN rank
     f. í˜ì´ì§€ í•˜ë‹¨ê¹Œì§€ ìŠ¤í¬ë¡¤
     g. currentPage++
3. RETURN -1 (ìˆœìœ„ ëª» ì°¾ìŒ)
```

**JavaScript ì¸ì ì…˜ ì˜ˆì‹œ**:

```javascript
(function() {
    var products = document.querySelectorAll('[data-product-id]');
    var result = [];
    for (var i = 0; i < products.length; i++) {
        var mid1 = products[i].getAttribute('data-product-id');
        result.push({
            index: i,
            mid1: mid1
        });
    }
    return JSON.stringify(result);
})();
```

**ê²€ì¦ ê¸°ì¤€**:
- ì‹¤ì œ ë„¤ì´ë²„ ì‡¼í•‘ì—ì„œ ìˆ˜ë™ ê²€ìƒ‰ ê²°ê³¼ì™€ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
- ìˆœìœ„ ì˜¤ì°¨ ë²”ìœ„: Â±0 (ì •í™•íˆ ì¼ì¹˜)

#### 4.1.4 ìˆœìœ„ ë³´ê³ 

**ìš”êµ¬ì‚¬í•­**:
- ìˆœìœ„ ì²´í¬ ì™„ë£Œ í›„ ê²°ê³¼ë¥¼ Zero API ì„œë²„ë¡œ ì „ì†¡í•´ì•¼ í•©ë‹ˆë‹¤.
- ìˆœìœ„ë¥¼ ì°¾ì€ ê²½ìš°ì™€ ëª» ì°¾ì€ ê²½ìš° ëª¨ë‘ ë³´ê³ í•´ì•¼ í•©ë‹ˆë‹¤.

**API ëª…ì„¸**:

```
POST /v1/mobile/keyword/naver/{keywordId}/rank
Content-Type: application/x-www-form-urlencoded

Body:
  login_id={login_id}
  imei={imei}
  rank={rank}
  sub_rank={sub_rank}  // ì˜µì…˜, ê´‘ê³  ìˆœìœ„

Response:
{
  "status": 0,
  "message": "success"
}
```

**ê²€ì¦ ê¸°ì¤€**:
- ì‘ë‹µ `status`ê°€ 0ì´ë©´ ì„±ê³µ
- ìˆœìœ„ ë³´ê³  ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)

#### 4.1.5 ì‘ì—… ì™„ë£Œ ë³´ê³ 

**ìš”êµ¬ì‚¬í•­**:
- ëª¨ë“  ì‘ì—… ì™„ë£Œ í›„ ì„œë²„ì— ì™„ë£Œ ìƒíƒœë¥¼ ë³´ê³ í•´ì•¼ í•©ë‹ˆë‹¤.

**API ëª…ì„¸**:

```
POST /v1/mobile/keyword/{keywordId}/finish
Content-Type: application/x-www-form-urlencoded

Body:
  login_id={login_id}
  imei={imei}
  traffic_id={traffic_id}

Response:
{
  "status": 0,
  "message": "success"
}
```

### 4.2 ì„ íƒ ê¸°ëŠ¥ (Phase 2)

#### 4.2.1 ë¡œì»¬ í†µê³„

**ìš”êµ¬ì‚¬í•­**:
- ì‘ì—… ì´ë ¥ì„ ë¡œì»¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
- ì¼ë³„/ì£¼ë³„ ìˆœìœ„ ë³€ë™ ê·¸ë˜í”„
- ì‘ì—… ì„±ê³µë¥  í†µê³„

#### 4.2.2 ì•Œë¦¼ ì‹œìŠ¤í…œ

**ìš”êµ¬ì‚¬í•­**:
- ìˆœìœ„ ë³€ë™ ì‹œ í‘¸ì‹œ ì•Œë¦¼
- ì‘ì—… ì‹¤íŒ¨ ì‹œ ì•Œë¦¼
- ì¼ì¼ ìš”ì•½ ì•Œë¦¼

#### 4.2.3 ì„¤ì • í™”ë©´

**ìš”êµ¬ì‚¬í•­**:
- `login_id` ë° `imei` ì„¤ì •
- ìë™ ì‹œì‘ ì„¤ì •
- ì•Œë¦¼ ì„¤ì •

---

## 5. ë°ì´í„° ëª¨ë¸

### 5.1 KeywordItem

**ì„¤ëª…**: ë‹¨ì¼ ìˆœìœ„ ì²´í¬ ì‘ì—…ì„ ë‚˜íƒ€ë‚´ëŠ” ëª¨ë¸

**Java í´ë˜ìŠ¤**:

```java
public class KeywordItem {
    @SerializedName("keyword_id")
    public int keywordId;
    
    @SerializedName("search")
    public String search;  // ê²€ìƒ‰ í‚¤ì›Œë“œ
    
    @SerializedName("product_id")
    public String productId;  // íƒ€ê²Ÿ ìƒí’ˆ ID (MID1)
    
    @SerializedName("traffic_id")
    public int trafficId;
    
    // 10ê°œ ë³€ìˆ˜
    @SerializedName("ua_change")
    public int uaChange;
    
    @SerializedName("cookie_home_mode")
    public int cookieHomeMode;
    
    @SerializedName("shop_home")
    public int shopHome;
    
    @SerializedName("use_nid")
    public int useNid;
    
    @SerializedName("use_image")
    public int useImage;
    
    @SerializedName("work_type")
    public int workType;
    
    @SerializedName("random_click_count")
    public int randomClickCount;
    
    @SerializedName("work_more")
    public int workMore;
    
    @SerializedName("sec_fetch_site_mode")
    public int secFetchSiteMode;
    
    @SerializedName("low_delay")
    public int lowDelay;
    
    // ì¶”ê°€ ì •ë³´
    @SerializedName("ad_query")
    public String adQuery;
    
    @SerializedName("orig_query")
    public String origQuery;
    
    @SerializedName("sort")
    public String sort;  // "rel", "price_asc", "price_desc", "review", "sale"
    
    @SerializedName("view_type")
    public String viewType;  // "list", "image"
    
    @SerializedName("product_set")
    public String productSet;  // "total", "catalog", "overseas"
}
```

### 5.2 KeywordData

**ì„¤ëª…**: Zero API ì‘ë‹µ ë˜í¼

**Java í´ë˜ìŠ¤**:

```java
public class KeywordData {
    @SerializedName("status")
    public int status;
    
    @SerializedName("data")
    public List<KeywordItem> data;
    
    @SerializedName("user_agent")
    public String userAgent;
    
    @SerializedName("device_ip")
    public String deviceIp;
    
    @SerializedName("naver_cookie")
    public NaverCookieData naverCookie;
    
    @SerializedName("naver_login_cookie")
    public NaverLoginCookieData naverLoginCookie;
    
    public static class NaverCookieData {
        @SerializedName("nnb")
        public String nnb;
    }
    
    public static class NaverLoginCookieData {
        @SerializedName("nnb")
        public String nnb;
        
        @SerializedName("nid_aut")
        public String nidAut;
        
        @SerializedName("nid_ses")
        public String nidSes;
        
        @SerializedName("nid_jkl")
        public String nidJkl;
    }
}
```

### 5.3 RankResult

**ì„¤ëª…**: ìˆœìœ„ ì²´í¬ ê²°ê³¼

**Java í´ë˜ìŠ¤**:

```java
public class RankResult {
    public int keywordId;
    public int rank;  // -1ì´ë©´ ìˆœìœ„ ëª» ì°¾ìŒ
    public int subRank;  // ê´‘ê³  ìˆœìœ„ (ì˜µì…˜)
    public long timestamp;
    public boolean success;
    public String errorMessage;
}
```

---

## 6. HTTP í†µì‹  í”„ë¡œí† ì½œ

### 6.1 Zero API ì—”ë“œí¬ì¸íŠ¸

**Base URL**: `http://api-daae8ace959079d5.elb.ap-northeast-2.amazonaws.com/zero/api/`

#### 6.1.1 ì‘ì—… ìš”ì²­

```
POST /v1/mobile/keywords/naver/rank_check
Content-Type: application/x-www-form-urlencoded

Body:
  login_id={login_id}
  imei={imei}
```

**ì‘ë‹µ ì˜ˆì‹œ**:

```json
{
  "status": 0,
  "data": [
    {
      "keyword_id": 896912,
      "search": "ìì „ê±° ì¥ê°‘",
      "product_id": "48270522934",
      "traffic_id": 67890,
      "ua_change": 1,
      "cookie_home_mode": 1,
      "shop_home": 1,
      "use_nid": 0,
      "use_image": 1,
      "work_type": 3,
      "random_click_count": 2,
      "work_more": 1,
      "sec_fetch_site_mode": 1,
      "low_delay": 2
    }
  ],
  "user_agent": "Mozilla/5.0 (Linux; Android 8.0.0; SM-G930K Build/R16NW; wv) AppleWebKit/537.36",
  "naver_cookie": {
    "nnb": "IJETDRGUTUMGS"
  }
}
```

#### 6.1.2 ìˆœìœ„ ë³´ê³ 

```
POST /v1/mobile/keyword/naver/{keywordId}/rank
Content-Type: application/x-www-form-urlencoded

Body:
  login_id={login_id}
  imei={imei}
  rank={rank}
  sub_rank={sub_rank}
```

#### 6.1.3 ìƒí’ˆ ì •ë³´ ì—…ë°ì´íŠ¸

```
POST /v1/mobile/keyword/naver/{keywordId}/product_info
Content-Type: application/x-www-form-urlencoded

Body:
  login_id={login_id}
  imei={imei}
  product_name={product_name}
  price={price}
  image_url={image_url}
```

#### 6.1.4 ì‘ì—… ì™„ë£Œ

```
POST /v1/mobile/keyword/{keywordId}/finish
Content-Type: application/x-www-form-urlencoded

Body:
  login_id={login_id}
  imei={imei}
  traffic_id={traffic_id}
```

### 6.2 ë„¤ì´ë²„ ì‡¼í•‘ API

#### 6.2.1 ê²€ìƒ‰ API

**URL**: `https://msearch.shopping.naver.com/search/all`

**íŒŒë¼ë¯¸í„°**:

| íŒŒë¼ë¯¸í„° | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|----------|------|------|------|------|
| `query` | string | Y | ê²€ìƒ‰ í‚¤ì›Œë“œ | "ìì „ê±° ì¥ê°‘" |
| `pagingIndex` | int | N | í˜ì´ì§€ ë²ˆí˜¸ (1ë¶€í„° ì‹œì‘) | 1 |
| `sort` | string | N | ì •ë ¬ ë°©ì‹ | "rel" (ê´€ë ¨ë„ìˆœ) |
| `viewType` | string | N | ë·° íƒ€ì… | "list" |
| `productSet` | string | N | ìƒí’ˆ ì„¸íŠ¸ | "total" |

**ì˜ˆì‹œ URL**:

```
https://msearch.shopping.naver.com/search/all?query=ìì „ê±°+ì¥ê°‘&pagingIndex=1&sort=rel&viewType=list&productSet=total
```

**ì‘ë‹µ í˜•ì‹**: HTML (JavaScriptë¡œ íŒŒì‹± í•„ìš”)

#### 6.2.2 GraphQL API

**URL**: `https://msearch.shopping.naver.com/api/graphql`

**ì„¤ëª…**: ë„¤ì´ë²„ ì‡¼í•‘ ë‚´ë¶€ API (ì„ íƒ ì‚¬í•­)

### 6.3 HTTP í—¤ë” ìƒì„±

**Logcat ë¶„ì„ ê²°ê³¼ ê¸°ë°˜ ì‹¤ì œ í—¤ë”**:

```
User-Agent: Mozilla/5.0 (Linux; Android 8.0.0; SM-G930K Build/R16NW; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/92.0.4515.131 Mobile Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7
Referer: https://msearch.shopping.naver.com/
Sec-Fetch-Site: same-site
Sec-Fetch-Mode: navigate
Sec-Fetch-Dest: document
Cookie: NNB=IJETDRGUTUMGS; sus_val=i/DMeSSl8QvYVkq3GLngDk2v
```

**í—¤ë” ìƒì„± Java ì½”ë“œ**:

```java
public class HttpHeaderGenerator {
    
    public static Map<String, String> generate(KeywordItem task, KeywordData data) {
        Map<String, String> headers = new HashMap<>();
        
        // User-Agent
        if (task.uaChange == 1 && data.userAgent != null) {
            headers.put("User-Agent", data.userAgent);
        } else {
            headers.put("User-Agent", getDefaultUserAgent());
        }
        
        // Accept
        headers.put("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
        
        // Accept-Language
        headers.put("Accept-Language", "ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7");
        
        // Referer
        String[] referers = {
            "https://m.naver.com/",
            "https://msearch.shopping.naver.com/",
            null,
            "https://msearch.shopping.naver.com/di/",
            "https://search.naver.com/search.naver"
        };
        if (task.shopHome >= 0 && task.shopHome < referers.length && referers[task.shopHome] != null) {
            headers.put("Referer", referers[task.shopHome]);
        }
        
        // Sec-Fetch-*
        String[] secFetchSites = {"none", "same-site", "same-origin"};
        if (task.secFetchSiteMode >= 0 && task.secFetchSiteMode < secFetchSites.length) {
            headers.put("Sec-Fetch-Site", secFetchSites[task.secFetchSiteMode]);
        }
        headers.put("Sec-Fetch-Mode", "navigate");
        headers.put("Sec-Fetch-Dest", "document");
        
        return headers;
    }
    
    private static String getDefaultUserAgent() {
        return "Mozilla/5.0 (Linux; Android 8.0.0; SM-G930K Build/R16NW; wv) " +
               "AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 " +
               "Chrome/92.0.4515.131 Mobile Safari/537.36";
    }
}
```

### 6.4 ì¿ í‚¤ ê´€ë¦¬

**Logcat ë¶„ì„ ê²°ê³¼ ê¸°ë°˜ ì‹¤ì œ ì¿ í‚¤**:

```
NNB=IJETDRGUTUMGS
sus_val=i/DMeSSl8QvYVkq3GLngDk2v
```

**ì¿ í‚¤ ì„¤ì • Java ì½”ë“œ**:

```java
public class CookieManager {
    
    public static void setCookies(WebView webView, KeywordData data, KeywordItem task) {
        android.webkit.CookieManager cookieManager = android.webkit.CookieManager.getInstance();
        cookieManager.setAcceptCookie(true);
        
        // NNB ì¿ í‚¤ (í•„ìˆ˜)
        if (data.naverCookie != null && data.naverCookie.nnb != null) {
            cookieManager.setCookie(".naver.com", "NNB=" + data.naverCookie.nnb);
        }
        
        // sus_val ì¿ í‚¤ (ì„ íƒ, ìˆìœ¼ë©´ ì„¤ì •)
        // ì°¸ê³ : sus_valì€ Logcatì—ì„œ í™•ì¸ë˜ì—ˆì§€ë§Œ API ì‘ë‹µì—ëŠ” ì—†ìŒ
        // ì‹¤ì œ êµ¬í˜„ ì‹œ ë³„ë„ ê´€ë¦¬ í•„ìš”
        
        // ë¡œê·¸ì¸ ì¿ í‚¤ (use_nid == 1ì¼ ë•Œë§Œ)
        if (task.useNid == 1 && data.naverLoginCookie != null) {
            if (data.naverLoginCookie.nidAut != null) {
                cookieManager.setCookie(".naver.com", "NID_AUT=" + data.naverLoginCookie.nidAut);
            }
            if (data.naverLoginCookie.nidSes != null) {
                cookieManager.setCookie(".naver.com", "NID_SES=" + data.naverLoginCookie.nidSes);
            }
            if (data.naverLoginCookie.nidJkl != null) {
                cookieManager.setCookie(".naver.com", "NID_JKL=" + data.naverLoginCookie.nidJkl);
            }
        }
        
        cookieManager.flush();
    }
}
```

---

## 7. ìˆœìœ„ ì²´í¬ ì•Œê³ ë¦¬ì¦˜

### 7.1 ì•Œê³ ë¦¬ì¦˜ ê°œìš”

**ëª©í‘œ**: ë„¤ì´ë²„ ì‡¼í•‘ ê²€ìƒ‰ ê²°ê³¼ì—ì„œ íƒ€ê²Ÿ ìƒí’ˆì˜ ìˆœìœ„ë¥¼ ì°¾ìŠµë‹ˆë‹¤.

**ì…ë ¥**:
- `keyword`: ê²€ìƒ‰ í‚¤ì›Œë“œ (ì˜ˆ: "ìì „ê±° ì¥ê°‘")
- `productId`: íƒ€ê²Ÿ ìƒí’ˆ ID (MID1, ì˜ˆ: "48270522934")
- `maxPages`: ìµœëŒ€ ê²€ìƒ‰ í˜ì´ì§€ ìˆ˜ (ê¸°ë³¸ê°’: 10)

**ì¶œë ¥**:
- `rank`: ìˆœìœ„ (1ë¶€í„° ì‹œì‘, ëª» ì°¾ìœ¼ë©´ -1)

### 7.2 ìƒì„¸ ì•Œê³ ë¦¬ì¦˜

**Pseudocode**:

```
FUNCTION checkRank(keyword, productId, maxPages):
    FOR page FROM 1 TO maxPages:
        // 1. URL ìƒì„±
        url = buildSearchUrl(keyword, page)
        
        // 2. í˜ì´ì§€ ë¡œë“œ
        loadPage(url)
        waitForPageLoad()
        
        // 3. ìƒí’ˆ ëª©ë¡ ì¶”ì¶œ
        products = extractProducts()
        
        // 4. íƒ€ê²Ÿ ìƒí’ˆ ì°¾ê¸°
        FOR index, product IN products:
            IF product.mid1 == productId:
                rank = (page - 1) * 40 + index + 1
                RETURN rank
        
        // 5. í˜ì´ì§€ í•˜ë‹¨ê¹Œì§€ ìŠ¤í¬ë¡¤
        scrollToBottom()
        
        // 6. ë”œë ˆì´
        sleep(lowDelay)
    
    // ëª» ì°¾ìŒ
    RETURN -1
```

**Java êµ¬í˜„**:

```java
public class NaverShopRankChecker {
    
    private static final int PRODUCTS_PER_PAGE = 40;
    private static final int MAX_PAGES = 10;
    
    public int checkRank(String keyword, String productId, int lowDelay) {
        for (int page = 1; page <= MAX_PAGES; page++) {
            String url = buildSearchUrl(keyword, page);
            
            // WebViewë¡œ í˜ì´ì§€ ë¡œë“œ
            webView.loadUrl(url);
            waitForPageLoad();
            
            // JavaScript ì¸ì ì…˜ìœ¼ë¡œ ìƒí’ˆ ëª©ë¡ ì¶”ì¶œ
            String productsJson = extractProducts();
            List<Product> products = parseProducts(productsJson);
            
            // íƒ€ê²Ÿ ìƒí’ˆ ì°¾ê¸°
            for (int i = 0; i < products.size(); i++) {
                if (products.get(i).mid1.equals(productId)) {
                    int rank = (page - 1) * PRODUCTS_PER_PAGE + i + 1;
                    Log.d("RankChecker", "Found at rank: " + rank);
                    return rank;
                }
            }
            
            // í˜ì´ì§€ í•˜ë‹¨ê¹Œì§€ ìŠ¤í¬ë¡¤
            scrollToBottom();
            
            // ë”œë ˆì´
            try {
                Thread.sleep(lowDelay * 1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        
        Log.d("RankChecker", "Rank not found");
        return -1;
    }
    
    private String buildSearchUrl(String keyword, int page) {
        return "https://msearch.shopping.naver.com/search/all" +
               "?query=" + URLEncoder.encode(keyword, "UTF-8") +
               "&pagingIndex=" + page +
               "&sort=rel" +
               "&viewType=list" +
               "&productSet=total";
    }
    
    private String extractProducts() {
        String js = 
            "(function() {" +
            "  var products = document.querySelectorAll('[data-product-id]');" +
            "  var result = [];" +
            "  for (var i = 0; i < products.length; i++) {" +
            "    var mid1 = products[i].getAttribute('data-product-id');" +
            "    result.push({ index: i, mid1: mid1 });" +
            "  }" +
            "  return JSON.stringify(result);" +
            "})();";
        
        // WebViewì—ì„œ JavaScript ì‹¤í–‰ ë° ê²°ê³¼ ë°˜í™˜
        return evaluateJavaScript(js);
    }
    
    private void scrollToBottom() {
        String js = "window.scrollTo(0, document.body.scrollHeight);";
        webView.evaluateJavascript(js, null);
    }
}
```

### 7.3 Logcat ë¶„ì„ ê²°ê³¼

**ì‹¤ì œ ë™ì‘ ë¡œê·¸**:

```
11-16 02:02:54.902 30263 30369 D NaverShopRankAction: - ë‹¨ì¼ìƒí’ˆ ìˆœìœ„ ê²€ì‚¬ 2í˜ì´ì§€: 48270522934
11-16 02:02:54.902 30263 30369 D NaverShopRankAction: - ë‹¨ì¼ìƒí’ˆ ìˆœìœ„ ê²€ì‚¬ total: 40
11-16 02:02:55.019 30263 30369 D NaverRankAction: rank: 0, nodes: 7
11-16 02:02:55.019 30263 30369 D NaverRankPatternMessage: # ìˆœìœ„ë¥¼ ëª»ì°¾ì•„ì„œ ë‹¤ìŒìœ¼ë¡œ.. 3
```

**ë¶„ì„**:
- í˜ì´ì§€ë‹¹ 40ê°œ ìƒí’ˆ ê²€ì‚¬
- ìˆœìœ„ë¥¼ ëª» ì°¾ìœ¼ë©´ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™
- ìµœëŒ€ 10í˜ì´ì§€ê¹Œì§€ ê²€ìƒ‰

### 7.4 ì—ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬

**ì¼€ì´ìŠ¤ 1: ê´‘ê³  ìƒí’ˆ**

**ë¬¸ì œ**: ê´‘ê³  ìƒí’ˆê³¼ ì¼ë°˜ ìƒí’ˆì´ ì„ì—¬ ìˆìŒ

**í•´ê²°ì±…**:
- ê´‘ê³  ìƒí’ˆì€ ë³„ë„ ì¹´ìš´íŠ¸ (`sub_rank`)
- ì¼ë°˜ ìƒí’ˆë§Œ ìˆœìœ„ ê³„ì‚°

**ì¼€ì´ìŠ¤ 2: ë™ì  ë¡œë”©**

**ë¬¸ì œ**: ìŠ¤í¬ë¡¤ ì‹œ ì¶”ê°€ ìƒí’ˆ ë¡œë“œ

**í•´ê²°ì±…**:
- í˜ì´ì§€ í•˜ë‹¨ê¹Œì§€ ìŠ¤í¬ë¡¤ í›„ ëŒ€ê¸°
- ëª¨ë“  ìƒí’ˆ ë¡œë“œ ì™„ë£Œ í™•ì¸

**ì¼€ì´ìŠ¤ 3: ë„¤íŠ¸ì›Œí¬ ì§€ì—°**

**ë¬¸ì œ**: í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨

**í•´ê²°ì±…**:
- íƒ€ì„ì•„ì›ƒ ì„¤ì • (20ì´ˆ)
- ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ (ìµœëŒ€ 3íšŒ)

---

## 8. ë³´ì•ˆ ë° ì°¨ë‹¨ íšŒí”¼

### 8.1 User-Agent ë¡œí…Œì´ì…˜

**ëª©ì **: ë™ì¼í•œ User-Agent ë°˜ë³µ ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ì°¨ë‹¨ ë°©ì§€

**êµ¬í˜„ ë°©ì•ˆ**:

```java
public class UserAgentPool {
    private static final String[] USER_AGENTS = {
        "Mozilla/5.0 (Linux; Android 8.0.0; SM-G930K Build/R16NW; wv) AppleWebKit/537.36",
        "Mozilla/5.0 (Linux; Android 9.0; SM-G960N Build/PPR1.180610.011; wv) AppleWebKit/537.36",
        "Mozilla/5.0 (Linux; Android 10; SM-G973N Build/QP1A.190711.020; wv) AppleWebKit/537.36",
        "Mozilla/5.0 (Linux; Android 11; SM-G991N Build/RP1A.200720.012; wv) AppleWebKit/537.36",
        // ... ë” ë§ì€ UA
    };
    
    private Random random = new Random();
    
    public String getRandomUserAgent() {
        return USER_AGENTS[random.nextInt(USER_AGENTS.length)];
    }
}
```

### 8.2 ì¿ í‚¤ ê´€ë¦¬

**ëª©ì **: ì¿ í‚¤ ì°¨ë‹¨ ë°©ì§€ ë° ë¡œí…Œì´ì…˜

**êµ¬í˜„ ë°©ì•ˆ**:
- ì„œë²„ë¡œë¶€í„° ì—¬ëŸ¬ ê°œì˜ ì¿ í‚¤ ìˆ˜ì‹ 
- ì‘ì—…ë§ˆë‹¤ ë‹¤ë¥¸ ì¿ í‚¤ ì‚¬ìš©
- ì¿ í‚¤ ìœ íš¨ì„± ê²€ì‚¬ (ì°¨ë‹¨ëœ ì¿ í‚¤ ì œê±°)

### 8.3 ëœë¤ í–‰ë™ íŒ¨í„´

**ëª©ì **: ë´‡ íƒì§€ íšŒí”¼

**êµ¬í˜„ ë°©ì•ˆ**:

```java
public class BehaviorSimulator {
    
    public void simulateHumanBehavior(KeywordItem task) {
        // 1. ëœë¤ í´ë¦­
        for (int i = 0; i < task.randomClickCount; i++) {
            clickRandomElement();
            sleep(randomDelay(500, 2000));
        }
        
        // 2. ëœë¤ ìŠ¤í¬ë¡¤
        int scrollCount = random.nextInt(3) + 1;
        for (int i = 0; i < scrollCount; i++) {
            scrollRandomAmount();
            sleep(randomDelay(1000, 3000));
        }
        
        // 3. ë”ë³´ê¸° í´ë¦­ (work_more == 1)
        if (task.workMore == 1) {
            clickMoreButton();
            sleep(randomDelay(1000, 2000));
        }
    }
    
    private int randomDelay(int min, int max) {
        return random.nextInt(max - min) + min;
    }
}
```

### 8.4 ë”œë ˆì´ ì¡°ì •

**ëª©ì **: ìš”ì²­ ì†ë„ ì œí•œ ë° ìì—°ìŠ¤ëŸ¬ìš´ í–‰ë™ íŒ¨í„´

**êµ¬í˜„ ë°©ì•ˆ**:
- `low_delay` ë³€ìˆ˜ ì‚¬ìš© (ì„œë²„ì—ì„œ ì œì–´)
- ì¶”ê°€ ëœë¤ ë”œë ˆì´ (Â±20%)

```java
public void applyDelay(int lowDelay) {
    int baseDelay = lowDelay * 1000;  // ì´ˆ â†’ ë°€ë¦¬ì´ˆ
    int randomOffset = (int) (baseDelay * 0.2 * (random.nextDouble() - 0.5));
    int finalDelay = baseDelay + randomOffset;
    
    try {
        Thread.sleep(finalDelay);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}
```

### 8.5 í”„ë¡ì‹œ ì‚¬ìš© (ì„ íƒ ì‚¬í•­)

**ëª©ì **: IP ì°¨ë‹¨ ë°©ì§€

**êµ¬í˜„ ë°©ì•ˆ**:
- OkHttpì— í”„ë¡ì‹œ ì„¤ì •
- í”„ë¡ì‹œ ë¡œí…Œì´ì…˜

```java
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("proxy.example.com", 8080));

OkHttpClient client = new OkHttpClient.Builder()
    .proxy(proxy)
    .build();
```

---

## 9. ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­

### 9.1 ì‘ë‹µ ì‹œê°„

| ì‘ì—… | ëª©í‘œ ì‹œê°„ | ìµœëŒ€ ì‹œê°„ |
|------|-----------|-----------|
| ì‘ì—… ìš”ì²­ (getKeywordsForRankCheck) | < 2ì´ˆ | 5ì´ˆ |
| í˜ì´ì§€ ë¡œë“œ | < 3ì´ˆ | 10ì´ˆ |
| ìˆœìœ„ ì²´í¬ (1í˜ì´ì§€) | < 5ì´ˆ | 15ì´ˆ |
| ìˆœìœ„ ì²´í¬ (10í˜ì´ì§€) | < 50ì´ˆ | 120ì´ˆ |
| ìˆœìœ„ ë³´ê³  (updateKeywordRank) | < 2ì´ˆ | 5ì´ˆ |

### 9.2 ì²˜ë¦¬ëŸ‰

| ì§€í‘œ | ëª©í‘œ |
|------|------|
| ì‹œê°„ë‹¹ ì‘ì—… ì²˜ë¦¬ ìˆ˜ | 10ê°œ ì´ìƒ |
| ì¼ì¼ ì‘ì—… ì²˜ë¦¬ ìˆ˜ | 200ê°œ ì´ìƒ |
| ë™ì‹œ ì‘ì—… ìˆ˜ | 1ê°œ (ë‹¨ì¼ ë””ë°”ì´ìŠ¤) |

### 9.3 ë¦¬ì†ŒìŠ¤ ì‚¬ìš©

| ë¦¬ì†ŒìŠ¤ | ì œí•œ |
|--------|------|
| ë©”ëª¨ë¦¬ | < 200MB |
| CPU | < 30% (í‰ê· ) |
| ë„¤íŠ¸ì›Œí¬ | < 10MB/ì‘ì—… |
| ë°°í„°ë¦¬ | < 5%/ì‹œê°„ |

### 9.4 ì•ˆì •ì„±

| ì§€í‘œ | ëª©í‘œ |
|------|------|
| ì‘ì—… ì„±ê³µë¥  | > 95% |
| ì•± í¬ë˜ì‹œìœ¨ | < 1% |
| ì—ëŸ¬ ë³µêµ¬ìœ¨ | > 90% |

---

## 10. í…ŒìŠ¤íŠ¸ ê³„íš

### 10.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ ëŒ€ìƒ**:
- HttpHeaderGenerator
- CookieManager
- NaverShopRankChecker
- BehaviorSimulator

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì˜ˆì‹œ**:

```java
@Test
public void testHttpHeaderGeneration() {
    KeywordItem task = new KeywordItem();
    task.uaChange = 1;
    task.shopHome = 1;
    task.secFetchSiteMode = 1;
    
    KeywordData data = new KeywordData();
    data.userAgent = "Test UA";
    
    Map<String, String> headers = HttpHeaderGenerator.generate(task, data);
    
    assertEquals("Test UA", headers.get("User-Agent"));
    assertEquals("https://msearch.shopping.naver.com/", headers.get("Referer"));
    assertEquals("same-site", headers.get("Sec-Fetch-Site"));
}
```

### 10.2 í†µí•© í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:

1. **ì •ìƒ ì‘ì—… íë¦„**
   - ì‘ì—… ìš”ì²­ â†’ ìˆœìœ„ ì²´í¬ â†’ ìˆœìœ„ ë³´ê³  â†’ ì‘ì—… ì™„ë£Œ
   - ì˜ˆìƒ ê²°ê³¼: ëª¨ë“  ë‹¨ê³„ ì„±ê³µ

2. **ìˆœìœ„ ëª» ì°¾ìŒ**
   - ì‘ì—… ìš”ì²­ â†’ ìˆœìœ„ ì²´í¬ (10í˜ì´ì§€ ê²€ìƒ‰) â†’ ìˆœìœ„ ëª» ì°¾ìŒ â†’ ìˆœìœ„ ë³´ê³  (rank=-1)
   - ì˜ˆìƒ ê²°ê³¼: rank=-1ë¡œ ë³´ê³ 

3. **ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬**
   - ì‘ì—… ìš”ì²­ â†’ ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ â†’ ì¬ì‹œë„ â†’ ì„±ê³µ
   - ì˜ˆìƒ ê²°ê³¼: ì¬ì‹œë„ í›„ ì„±ê³µ

4. **10ê°œ ë³€ìˆ˜ ì¡°í•©**
   - ë‹¤ì–‘í•œ ë³€ìˆ˜ ì¡°í•©ìœ¼ë¡œ ì‘ì—… ì‹¤í–‰
   - ì˜ˆìƒ ê²°ê³¼: ê° ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë¨

### 10.3 ì‹¤ì œ í™˜ê²½ í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ í™˜ê²½**:
- ì‹¤ì œ ì•ˆë“œë¡œì´ë“œ ë””ë°”ì´ìŠ¤ (Samsung Galaxy S7, Android 8.0)
- ì‹¤ì œ Zero API ì„œë²„
- ì‹¤ì œ ë„¤ì´ë²„ ì‡¼í•‘

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**:

| ì¼€ì´ìŠ¤ | í‚¤ì›Œë“œ | ìƒí’ˆ ID | ì˜ˆìƒ ìˆœìœ„ | ì‹¤ì œ ìˆœìœ„ | ê²°ê³¼ |
|--------|--------|---------|-----------|-----------|------|
| 1 | "ìì „ê±° ì¥ê°‘" | "48270522934" | 1~40 | ? | ? |
| 2 | "ë¸”ë£¨íˆ¬ìŠ¤ í‚¤ë³´ë“œ" | "83811414103" | 41~80 | ? | ? |
| 3 | "ë¬´ì„  ë§ˆìš°ìŠ¤" | "12345678901" | -1 (ì—†ìŒ) | ? | ? |

**ê²€ì¦ ê¸°ì¤€**:
- ì‹¤ì œ ìˆœìœ„ì™€ ì¼ì¹˜ (Â±0)
- ì‘ì—… ì„±ê³µë¥  > 95%

### 10.4 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:
- 100ê°œ ì‘ì—… ì—°ì† ì‹¤í–‰
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- CPU ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- ë°°í„°ë¦¬ ì†Œëª¨ëŸ‰ ì¸¡ì •

**ê²€ì¦ ê¸°ì¤€**:
- ë©”ëª¨ë¦¬ < 200MB
- CPU < 30% (í‰ê· )
- ë°°í„°ë¦¬ < 5%/ì‹œê°„

### 10.5 ë³´ì•ˆ í…ŒìŠ¤íŠ¸

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:
- ë™ì¼í•œ User-Agent 100íšŒ ì‚¬ìš© â†’ ì°¨ë‹¨ ì—¬ë¶€ í™•ì¸
- ë™ì¼í•œ ì¿ í‚¤ 100íšŒ ì‚¬ìš© â†’ ì°¨ë‹¨ ì—¬ë¶€ í™•ì¸
- ì§§ì€ ë”œë ˆì´ (1ì´ˆ) ì‚¬ìš© â†’ ì°¨ë‹¨ ì—¬ë¶€ í™•ì¸

**ê²€ì¦ ê¸°ì¤€**:
- ì°¨ë‹¨ìœ¨ < 5%

---

## 11. ë°°í¬ ë° ìš´ì˜

### 11.1 ë¹Œë“œ ì„¤ì •

**build.gradle**:

```gradle
android {
    compileSdkVersion 33
    
    defaultConfig {
        applicationId "com.zero.updater.rank"
        minSdkVersion 26
        targetSdkVersion 33
        versionCode 1
        versionName "1.0.0"
    }
    
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    implementation 'com.squareup.retrofit2:retrofit:2.9.0'
    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'
    implementation 'com.squareup.okhttp3:okhttp:3.14.9'
    implementation 'com.google.code.gson:gson:2.8.9'
}
```

### 11.2 ProGuard ì„¤ì •

**proguard-rules.pro**:

```
# Retrofit
-keepattributes Signature
-keepattributes *Annotation*
-keep class retrofit2.** { *; }
-keepclasseswithmembers class * {
    @retrofit2.http.* <methods>;
}

# Gson
-keep class com.google.gson.** { *; }
-keep class com.zero.updater.rank.models.** { *; }

# OkHttp
-dontwarn okhttp3.**
-keep class okhttp3.** { *; }
```

### 11.3 ë°°í¬ ë°©ë²•

**ì˜µì…˜ 1: APK ì§ì ‘ ë°°í¬**
- APK íŒŒì¼ ìƒì„± (Build â†’ Build Bundle(s) / APK(s) â†’ Build APK(s))
- APK íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë§í¬ ì œê³µ

**ì˜µì…˜ 2: Google Play Store**
- ê°œë°œì ê³„ì • í•„ìš”
- ì•± ì‹¬ì‚¬ ê³¼ì • í•„ìš”

**ì˜µì…˜ 3: ì‚¬ë‚´ ë°°í¬**
- MDM (Mobile Device Management) ì‚¬ìš©
- ì§ì ‘ ì„¤ì¹˜

### 11.4 ëª¨ë‹ˆí„°ë§

**ë¡œê·¸ ìˆ˜ì§‘**:
- Logcat ë¡œê·¸ ìˆ˜ì§‘
- ì—ëŸ¬ ë¡œê·¸ ì„œë²„ ì „ì†¡

**ì§€í‘œ ìˆ˜ì§‘**:
- ì‘ì—… ì„±ê³µë¥ 
- í‰ê·  ìˆœìœ„ ì²´í¬ ì‹œê°„
- ì—ëŸ¬ ë°œìƒ ë¹ˆë„

**ì•Œë¦¼**:
- ì‘ì—… ì‹¤íŒ¨ ì‹œ ì•Œë¦¼
- ì—ëŸ¬ìœ¨ ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼

---

## 12. ë¶€ë¡

### 12.1 Frida í›„í‚¹ ìŠ¤í¬ë¦½íŠ¸

**ëª©ì **: ì‹¤ì œ HTTP ìš”ì²­/ì‘ë‹µ ë° 10ê°œ ë³€ìˆ˜ ìº¡ì²˜

**ìŠ¤í¬ë¦½íŠ¸**: `hook_keyword_data.js`

```javascript
Java.perform(function() {
    console.log("\nğŸ¯ KeywordData Capture Hook Starting...\n");
    
    // processKeywordData í›„í‚¹
    var ActivityMCloud = Java.use("com.sec.android.app.sbrowser.ActivityMCloud");
    
    ActivityMCloud.processKeywordData.implementation = function(data) {
        console.log("\n" + "=".repeat(80));
        console.log("ğŸ¯ processKeywordData í˜¸ì¶œ! (Zero API ì‘ë‹µ)");
        console.log("=".repeat(80));
        
        try {
            // User-Agent
            var userAgent = data.userAgent.value;
            console.log("\nğŸŒ User-Agent:");
            console.log("  " + userAgent);
            
            // ì‘ì—… ëª©ë¡
            var dataList = data.data.value;
            console.log("\nğŸ“¦ ì‘ì—… ëª©ë¡ (" + dataList.size() + "ê°œ):");
            console.log("-".repeat(80));
            
            for (var i = 0; i < dataList.size(); i++) {
                var item = dataList.get(i);
                
                console.log("\n  [ì‘ì—… #" + (i + 1) + "]");
                console.log("  â”œâ”€ keyword_id: " + item.keywordId.value);
                console.log("  â”œâ”€ search (í‚¤ì›Œë“œ): " + item.search.value);
                console.log("  â”œâ”€ product_id (MID1): " + item.productId.value);
                console.log("  â”œâ”€ traffic_id: " + item.trafficId.value);
                
                console.log("\n  ğŸ¯ 10ê°œ ë³€ìˆ˜:");
                console.log("  â”œâ”€ [1] ua_change: " + item.uaChange.value);
                console.log("  â”œâ”€ [2] cookie_home_mode: " + item.cookieHomeMode.value);
                console.log("  â”œâ”€ [3] shop_home: " + item.shopHome.value);
                console.log("  â”œâ”€ [4] use_nid: " + item.useNid.value);
                console.log("  â”œâ”€ [5] use_image: " + item.useImage.value);
                console.log("  â”œâ”€ [6] work_type: " + item.workType.value);
                console.log("  â”œâ”€ [7] random_click_count: " + item.randomClickCount.value);
                console.log("  â”œâ”€ [8] work_more: " + item.workMore.value);
                console.log("  â”œâ”€ [9] sec_fetch_site_mode: " + item.secFetchSiteMode.value);
                console.log("  â””â”€ [10] low_delay: " + item.lowDelay.value);
            }
            
            console.log("\n" + "-".repeat(80));
            console.log("=".repeat(80) + "\n");
            
        } catch (e) {
            console.log("[-] Error: " + e);
        }
        
        return this.processKeywordData(data);
    };
    
    console.log("[+] processKeywordData Hooked!");
    console.log("\nâœ… All Hooks Installed Successfully!\n");
});
```

### 12.2 Logcat í•„í„°ë§ ëª…ë ¹ì–´

**ì‘ì—… ìš”ì²­ ë¡œê·¸**:

```bash
adb logcat | grep -i "getKeywordsForRankCheck\|processKeywordData"
```

**ìˆœìœ„ ì²´í¬ ë¡œê·¸**:

```bash
adb logcat | grep -i "NaverShopRankAction\|NaverRankAction"
```

**ë„¤íŠ¸ì›Œí¬ ë¡œê·¸**:

```bash
adb logcat | grep -i "NetworkEngine\|OkHttp"
```

### 12.3 ì°¸ê³  ìë£Œ

**ë¦¬ë²„ìŠ¤ ì—”ì§€ë‹ˆì–´ë§ ë³´ê³ ì„œ**:
- íŒŒì¼: `REVERSE_ENGINEERING_REPORT.md`
- ìœ„ì¹˜: `https://github.com/mim1012/turafic/blob/main/REVERSE_ENGINEERING_REPORT.md`

**êµ¬í˜„ ê³„íšì„œ**:
- íŒŒì¼: `IMPLEMENTATION_PLAN.md`
- ìœ„ì¹˜: `https://github.com/mim1012/turafic/blob/main/IMPLEMENTATION_PLAN.md`

**ì†ŒìŠ¤ ì½”ë“œ**:
- APK ë””ì»´íŒŒì¼ ê²°ê³¼: `/home/ubuntu/upload/sbrowser_jadx/sources/`
- í•µì‹¬ í´ë˜ìŠ¤:
  - `com/sec/android/app/sbrowser/models/KeywordItem.java`
  - `com/sec/android/app/sbrowser/models/KeywordData.java`
  - `com/sec/android/app/sbrowser/engine/NetworkEngine.java`
  - `com/sec/android/app/sbrowser/ActivityMCloud.java`
  - `com/sec/android/app/sbrowser/action/NaverShopRankAction.java`

---

## ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|-----------|
| 1.0 | 2025-11-16 | Manus AI | ì´ˆì•ˆ ì‘ì„± |

---

**ë¬¸ì„œ ë**
